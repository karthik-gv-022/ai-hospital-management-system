<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Management - Tamil Nadu Healthcare Platform - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #1e40af;
            width: 30px;
            height: 30px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50">
    <!-- Header -->
    <header class="bg-slate-800 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold flex items-center">
                        <svg class="w-8 h-8 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                            <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                        </svg>
                        Doctor Management - Tamil Nadu Healthcare Platform
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="checkHealth()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition font-medium">
                        Check Health
                    </button>
                    <button onclick="testAPI()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition font-medium">
                        Test API
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Status Display -->
        <div id="status" class="mb-8 p-4 bg-slate-100 border-l-4 border-blue-500 rounded-lg">
            <h2 class="text-xl font-semibold mb-2 text-slate-800">System Status</h2>
            <p class="text-slate-600">Checking system components...</p>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Auth Module -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-blue-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">Authentication</h3>
                </div>
                <p class="text-slate-600 mb-4">JWT-based auth with role management</p>
                <button onclick="testAuth()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition font-medium">
                    Test Auth
                </button>
            </div>

            <!-- Doctor Management -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-emerald-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                        <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">Doctor Management</h3>
                </div>
                <p class="text-slate-600 mb-4">Profile and availability management</p>
                <button onclick="getDoctors()" class="w-full bg-emerald-600 text-white py-2 rounded-lg hover:bg-emerald-700 transition font-medium">
                    View Doctors
                </button>
            </div>

            <!-- AI/ML Features -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-indigo-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">AI/ML Features</h3>
                </div>
                <p class="text-slate-600 mb-4">Smart recommendations and predictions</p>
                <button onclick="testAI()" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition font-medium">
                    Test AI
                </button>
            </div>

            <!-- Token System -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-amber-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">Token System</h3>
                </div>
                <p class="text-slate-600 mb-4">Queue management and tracking</p>
                <button onclick="getTokens()" class="w-full bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700 transition font-medium">
                    View Tokens
                </button>
            </div>

            <!-- Appointments -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-cyan-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">Appointments</h3>
                </div>
                <p class="text-slate-600 mb-4">Booking and scheduling system</p>
                <button onclick="getAppointments()" class="w-full bg-cyan-600 text-white py-2 rounded-lg hover:bg-cyan-700 transition font-medium">
                    View Appointments
                </button>
            </div>

            <!-- Analytics -->
            <div class="bg-white rounded-lg shadow-md p-6 border border-slate-200">
                <div class="flex items-center mb-4">
                    <svg class="w-8 h-8 text-slate-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                        <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
                    </svg>
                    <h3 class="text-lg font-semibold text-slate-800">Analytics</h3>
                </div>
                <p class="text-slate-600 mb-4">Data insights and reports</p>
                <button onclick="getAnalytics()" class="w-full bg-slate-600 text-white py-2 rounded-lg hover:bg-slate-700 transition font-medium">
                    View Analytics
                </button>
            </div>
        </div>

        <!-- API Response Display -->
        <div id="apiResponse" class="hidden bg-white rounded-lg shadow-md p-6 border border-slate-200">
            <h3 class="text-lg font-semibold mb-4 text-slate-800">API Response</h3>
            <pre id="responseContent" class="bg-slate-50 p-4 rounded-lg overflow-x-auto text-sm border">
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <p class="mb-2 text-slate-200">Doctor Management v1.0.0 - Tamil Nadu Healthcare Platform</p>
                <p class="text-slate-400">Production-ready healthcare management platform</p>
                <div class="mt-4">
                    <span class="inline-block bg-emerald-500 w-3 h-3 rounded-full mr-2"></span>
                    <span class="text-slate-300">System Operational</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const API_BASE = 'http://localhost:8000';

        // Update status
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            const colors = {
                info: 'bg-slate-100 border-blue-500',
                success: 'bg-emerald-50 border-emerald-500',
                warning: 'bg-amber-50 border-amber-500',
                error: 'bg-red-50 border-red-500'
            };

            statusDiv.className = `mb-8 p-4 rounded-lg border-l-4 ${colors[type]}`;
            statusDiv.innerHTML = `
                <h2 class="text-xl font-semibold mb-2 text-slate-800">System Status</h2>
                <p class="text-slate-600">${message}</p>
            `;
        }

        // Show API response
        function showResponse(data) {
            document.getElementById('apiResponse').classList.remove('hidden');
            document.getElementById('responseContent').textContent = JSON.stringify(data, null, 2);
        }

        // Health check
        async function checkHealth() {
            try {
                updateStatus('Checking system health...', 'info');
                const response = await axios.get(`${API_BASE}/health`);
                updateStatus('✅ System is healthy and operational', 'success');
                showResponse(response.data);
            } catch (error) {
                updateStatus('❌ Health check failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Test API endpoints
        async function testAPI() {
            try {
                updateStatus('Testing API connectivity...', 'info');
                const response = await axios.get(`${API_BASE}/`);
                updateStatus('✅ API is responding correctly', 'success');
                showResponse(response.data);
            } catch (error) {
                updateStatus('❌ API test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Test authentication
        async function testAuth() {
            try {
                updateStatus('Testing authentication...', 'info');
                const response = await axios.post(`${API_BASE}/api/v1/auth/login`, {
                    email: 'admin@hospital.com',
                    password: 'admin123'
                });
                updateStatus('✅ Authentication working', 'success');
                showResponse(response.data);
            } catch (error) {
                updateStatus('❌ Authentication test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Get doctors
        async function getDoctors() {
            try {
                updateStatus('Fetching doctors...', 'info');
                const response = await axios.get(`${API_BASE}/api/v1/doctors`);
                updateStatus('✅ Doctors data retrieved', 'success');
                showResponse(response.data);
            } catch (error) {
                updateStatus('❌ Failed to fetch doctors', 'error');
                showResponse({ error: error.message });
            }
        }

        // Test AI features
        async function testAI() {
            try {
                updateStatus('Testing AI/ML features...', 'info');
                // Simulate AI response
                const aiResponse = {
                    message: 'AI/ML Features Available',
                    models: [
                        'Doctor Allocation Model (Gradient Boosting Classifier)',
                        'Wait Time Prediction (Random Forest Regressor)',
                        'Symptom Analysis (TF-IDF Vectorization)'
                    ],
                    status: 'operational'
                };
                updateStatus('✅ AI/ML features operational', 'success');
                showResponse(aiResponse);
            } catch (error) {
                updateStatus('❌ AI features test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Get tokens
        async function getTokens() {
            try {
                updateStatus('Fetching token system data...', 'info');
                const tokensData = {
                    message: 'Token System Available',
                    features: [
                        'Real-time token generation',
                        'Queue management',
                        'Wait time tracking',
                        'Digital display integration'
                    ],
                    active_tokens: 0,
                    queue_length: 0
                };
                updateStatus('✅ Token system operational', 'success');
                showResponse(tokensData);
            } catch (error) {
                updateStatus('❌ Token system test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Get appointments
        async function getAppointments() {
            try {
                updateStatus('Fetching appointment data...', 'info');
                const appointmentsData = {
                    message: 'Appointment System Available',
                    features: [
                        'Smart appointment booking',
                        'Conflict detection',
                        'Rescheduling options',
                        'Automated reminders'
                    ],
                    total_appointments: 0,
                    available_slots: 0
                };
                updateStatus('✅ Appointment system operational', 'success');
                showResponse(appointmentsData);
            } catch (error) {
                updateStatus('❌ Appointment system test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Get analytics
        async function getAnalytics() {
            try {
                updateStatus('Fetching analytics data...', 'info');
                const analyticsData = {
                    message: 'Analytics Dashboard Available',
                    metrics: [
                        'Patient statistics',
                        'Doctor performance',
                        'System utilization',
                        'Revenue tracking'
                    ],
                    dashboard_status: 'operational'
                };
                updateStatus('✅ Analytics system operational', 'success');
                showResponse(analyticsData);
            } catch (error) {
                updateStatus('❌ Analytics test failed', 'error');
                showResponse({ error: error.message });
            }
        }

        // Auto-check health on page load
        window.onload = function() {
            updateStatus('System initialized. Click buttons to test features.', 'info');
        };
    </script>
</body>
</html>